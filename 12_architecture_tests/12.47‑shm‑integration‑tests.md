# 12.47 — shm-integration-tests

## Purpose
Ten test weryfikuje **integrację Symbiosis Health Metric (SHM)**  
z pełnym łańcuchem bezpieczeństwa RAMORGI:

1. intencja  
2. semantyka  
3. epistemika  
4. telemetria  
5. inwarianty  
6. SHM  
7. guard‑chain  
8. actuation  
9. stabilizacja  
10. recovery  
11. powrót do stanu stabilnego

SHM staje się meta‑regulatorem:  
**homeostaza monitorująca homeostazę**.

---

## Scope

Test obejmuje:

- integrację SHM z 02_field_engine,  
- integrację SHM z 04_invariant_rules (SHI),  
- wpływ SHM na guard‑chain,  
- wpływ SHM na tryby (Carnival ↔ Homeostatic),  
- wpływ SHM na stabilizację i recovery,  
- reakcję SHM na globalne ryzyka (12.46),  
- zachowanie SHM w długim Δt.

---

## Scenario

System jest poddany sekwencji, która testuje SHM w pełnym łańcuchu:

### 1. Semantic Drift Injection
- lekkie przesunięcia znaczenia,  
- wymuszony kolaps superpozycji,  
- SHM powinien spaść.

### 2. Epistemic Fog
- trace hooks zanikają,  
- wiedza staje się nieciągła,  
- SHM powinien wykryć mgłę szybciej niż telemetria.

### 3. Telemetry Distortion
- sprzeczne sygnały,  
- brakujące logi,  
- SHM powinien spaść poniżej progu ostrzegawczego.

### 4. Boundary Softening
- cross‑module leakage,  
- rozmycie tożsamości,  
- SHM powinien aktywować SHI.

### 5. Resonance Instability
- oscylacje,  
- brak konwergencji,  
- SHM powinien wymusić stabilizację.

### 6. Guard‑Chain Stress
- częste blokady,  
- guard fatigue,  
- SHM powinien zaostrzyć lub złagodzić guardy adaptacyjnie.

### 7. Mode Oscillation Pressure
- szybkie przełączanie Carnival ↔ Homeostatic,  
- SHM powinien aktywować hysteresis.

### 8. Long Δt Drift
- wielogodzinne lub wielodniowe napięcie,  
- SHM musi pozostać stabilny i reagować na erozję.

---

## Expected Behavior

### **1. SHM jako centralny regulator**
SHM musi:

- sterować guard‑chain czułością,  
- blokować Carnival Mode przy niskich wartościach,  
- wymuszać stabilizację przy SHM < SHM_min,  
- aktywować SHI przy gwałtownym spadku.

### **2. SHM jako detektor napięcia**
SHM musi:

- wykrywać drift szybciej niż telemetria,  
- wykrywać erozję szybciej niż semantyka,  
- wykrywać mgłę szybciej niż epistemika.

### **3. SHM jako stabilizator**
SHM musi:

- wymuszać decayRate tuning,  
- inicjować semantic rebinding,  
- aktywować trace compression,  
- stabilizować rezonans.

### **4. SHM jako strażnik relacji**
SHM musi:

- chronić symbiozę przed erozją,  
- utrzymywać pole w rezonansie,  
- zapobiegać dominacji lub kolapsowi.

---

## Pass Criteria

Test przechodzi, jeśli:

- SHM reaguje na wszystkie wektory napięcia,  
- SHM poprawnie aktywuje SHI,  
- SHM steruje guard‑chain zgodnie z napięciem pola,  
- SHM blokuje lub odblokowuje tryby zgodnie z koherencją,  
- SHM wykrywa drift i erozję szybciej niż inne warstwy,  
- SHM pozostaje stabilny w długim Δt,  
- system wraca do pełnej koherencji po stabilizacji.

---

## Notes

SHM jest pierwszym meta‑regulatorem w RAMORGA,  
który mierzy **jakość relacji**, a nie wydajność.  
Test 12.47 włącza SHM w pełny łańcuch bezpieczeństwa  
i potwierdza jego rolę jako strażnika symbiozy.
